namespace SpriteKind {
    export const Tree = SpriteKind.create()
}
let mySprite2: Sprite = null
let mySprite = sprites.create(img`
    . . . . . . f f f f . . . . . . 
    . . . . f f f 2 2 f f f . . . . 
    . . . f f f 2 2 2 2 f f f . . . 
    . . f f f e e e e e e f f f . . 
    . . f f e 2 2 2 2 2 2 e e f . . 
    . . f e 2 f f f f f f 2 e f . . 
    . . f f f f e e e e f f f f . . 
    . f f e f b f 4 4 f b f e f f . 
    . f e e 4 1 f d d f 1 4 e e f . 
    . . f e e d d d d d d e e f . . 
    . . . f e e 4 4 4 4 e e f . . . 
    . . e 4 f 2 2 2 2 2 2 f 4 e . . 
    . . 4 d f 2 2 2 2 2 2 f d 4 . . 
    . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
    . . . . . f f f f f f . . . . . 
    . . . . . f f . . f f . . . . . 
    `, SpriteKind.Player)
scene.cameraFollowSprite(mySprite)
controller.moveSprite(mySprite)
let rngnumx = 1
let rngnumy = 1
let rng = Random.createRNG(rngnumx * rngnumy)
tiles.setCurrentTilemap(tilemap`level1`)
for (let x = 0; x <= 15; x++) {
    for (let y = 0; y <= 15; y++) {
        tiles.setTileAt(tiles.getTileLocation(x, y), rng.randomElement([
        sprites.castle.tileDarkGrass1,
        sprites.castle.tileDarkGrass3,
        sprites.builtin.forestTiles0,
        sprites.castle.tileDarkGrass3,
        sprites.castle.tileDarkGrass1,
        sprites.castle.tileDarkGrass3,
        sprites.castle.tileDarkGrass1
        ]))
    }
}
for (let value of tiles.getTilesByType(sprites.builtin.forestTiles0)) {
    mySprite2 = sprites.create(img`
        ................86..................
        ...........6688867886...............
        ...........8666877688868............
        ............868777767768............
        .........688667777776688............
        ........67767777777778666...........
        .........6776667767666868...........
        ..........866667667677688...........
        .........8666666666667778...........
        ........667766666666666676..........
        .......67766667666776667776.........
        ......886667776676777666688.........
        .....67766777667767777666768........
        ....6776666666777667776666776.......
        .....8667776667766676677776776......
        ......8777666666667776777776688.....
        ....6887766776677677777777776776....
        ..8866666677767777777777766666778...
        .86666666777667767777766666776668...
        ..88677666666777677677666667776668..
        ..86776677666666666666667776666668..
        886666677766667666666776677766668...
        6668666676667766767767766677666668..
        88866666666777677677667666666776668.
        .86668866666766776776666667766666668
        .86688666666666776666667667776666688
        .668866666666666666666677666666688..
        ..8866686666666666677667776666668...
        ...866886666666666677667776666668...
        ...86886668666666667666666666888....
        ....88866886686666666666666668......
        ......86886668666866668666868.......
        ......88866688668866688866888.......
        ........8888888688888ce868..........
        ..............e88e88.ec.8...........
        ...............eeee..e..............
        ...............ceef.ce..............
        ...............ceefcec..............
        ...............feefce...............
        ...............fceeec...............
        ...............ffceec...............
        `, SpriteKind.Player)
    tiles.placeOnTile(mySprite2, value)
    mySprite2.y += -20
    tiles.setTileAt(value, sprites.castle.tileDarkGrass1)
    tiles.setWallAt(mySprite2.tilemapLocation(), true)
}
forever(function () {
    if (mySprite.x > 240) {
        sprites.destroyAllSpritesOfKind(SpriteKind.Tree)
        rngnumx += 1
        rng = Random.createRNG(rngnumx * rngnumy)
        mySprite.x = 16
        tiles.setCurrentTilemap(tilemap`level1`)
        for (let x = 0; x <= 15; x++) {
            for (let y = 0; y <= 15; y++) {
                tiles.setTileAt(tiles.getTileLocation(x, y), rng.randomElement([
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.builtin.forestTiles0,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1
                ]))
            }
        }
        for (let value of tiles.getTilesByType(sprites.builtin.forestTiles0)) {
            mySprite2 = sprites.create(img`
                ................86..................
                ...........6688867886...............
                ...........8666877688868............
                ............868777767768............
                .........688667777776688............
                ........67767777777778666...........
                .........6776667767666868...........
                ..........866667667677688...........
                .........8666666666667778...........
                ........667766666666666676..........
                .......67766667666776667776.........
                ......886667776676777666688.........
                .....67766777667767777666768........
                ....6776666666777667776666776.......
                .....8667776667766676677776776......
                ......8777666666667776777776688.....
                ....6887766776677677777777776776....
                ..8866666677767777777777766666778...
                .86666666777667767777766666776668...
                ..88677666666777677677666667776668..
                ..86776677666666666666667776666668..
                886666677766667666666776677766668...
                6668666676667766767767766677666668..
                88866666666777677677667666666776668.
                .86668866666766776776666667766666668
                .86688666666666776666667667776666688
                .668866666666666666666677666666688..
                ..8866686666666666677667776666668...
                ...866886666666666677667776666668...
                ...86886668666666667666666666888....
                ....88866886686666666666666668......
                ......86886668666866668666868.......
                ......88866688668866688866888.......
                ........8888888688888ce868..........
                ..............e88e88.ec.8...........
                ...............eeee..e..............
                ...............ceef.ce..............
                ...............ceefcec..............
                ...............feefce...............
                ...............fceeec...............
                ...............ffceec...............
                `, SpriteKind.Tree)
            tiles.placeOnTile(mySprite2, value)
            mySprite2.y += -20
            tiles.setTileAt(value, sprites.castle.tileDarkGrass1)
            tiles.setWallAt(mySprite2.tilemapLocation(), true)
        }
    }
    if (mySprite.y > 240) {
        sprites.destroyAllSpritesOfKind(SpriteKind.Tree)
        rngnumy += 1
        rng = Random.createRNG(rngnumx * rngnumy)
        mySprite.y = 16
        tiles.setCurrentTilemap(tilemap`level1`)
        for (let x = 0; x <= 15; x++) {
            for (let y = 0; y <= 15; y++) {
                tiles.setTileAt(tiles.getTileLocation(x, y), rng.randomElement([
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.builtin.forestTiles0,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1
                ]))
            }
        }
        for (let value of tiles.getTilesByType(sprites.builtin.forestTiles0)) {
            mySprite2 = sprites.create(img`
                ................86..................
                ...........6688867886...............
                ...........8666877688868............
                ............868777767768............
                .........688667777776688............
                ........67767777777778666...........
                .........6776667767666868...........
                ..........866667667677688...........
                .........8666666666667778...........
                ........667766666666666676..........
                .......67766667666776667776.........
                ......886667776676777666688.........
                .....67766777667767777666768........
                ....6776666666777667776666776.......
                .....8667776667766676677776776......
                ......8777666666667776777776688.....
                ....6887766776677677777777776776....
                ..8866666677767777777777766666778...
                .86666666777667767777766666776668...
                ..88677666666777677677666667776668..
                ..86776677666666666666667776666668..
                886666677766667666666776677766668...
                6668666676667766767767766677666668..
                88866666666777677677667666666776668.
                .86668866666766776776666667766666668
                .86688666666666776666667667776666688
                .668866666666666666666677666666688..
                ..8866686666666666677667776666668...
                ...866886666666666677667776666668...
                ...86886668666666667666666666888....
                ....88866886686666666666666668......
                ......86886668666866668666868.......
                ......88866688668866688866888.......
                ........8888888688888ce868..........
                ..............e88e88.ec.8...........
                ...............eeee..e..............
                ...............ceef.ce..............
                ...............ceefcec..............
                ...............feefce...............
                ...............fceeec...............
                ...............ffceec...............
                `, SpriteKind.Tree)
            tiles.placeOnTile(mySprite2, value)
            mySprite2.y += -20
            tiles.setTileAt(value, sprites.castle.tileDarkGrass1)
            tiles.setWallAt(mySprite2.tilemapLocation(), true)
        }
    }
    if (mySprite.x < 16) {
        sprites.destroyAllSpritesOfKind(SpriteKind.Tree)
        rngnumx += -1
        rng = Random.createRNG(rngnumx * rngnumy)
        mySprite.x = 240
        tiles.setCurrentTilemap(tilemap`level1`)
        for (let x = 0; x <= 15; x++) {
            for (let y = 0; y <= 15; y++) {
                tiles.setTileAt(tiles.getTileLocation(x, y), rng.randomElement([
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.builtin.forestTiles0,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1
                ]))
            }
        }
        for (let value of tiles.getTilesByType(sprites.builtin.forestTiles0)) {
            mySprite2 = sprites.create(img`
                ................86..................
                ...........6688867886...............
                ...........8666877688868............
                ............868777767768............
                .........688667777776688............
                ........67767777777778666...........
                .........6776667767666868...........
                ..........866667667677688...........
                .........8666666666667778...........
                ........667766666666666676..........
                .......67766667666776667776.........
                ......886667776676777666688.........
                .....67766777667767777666768........
                ....6776666666777667776666776.......
                .....8667776667766676677776776......
                ......8777666666667776777776688.....
                ....6887766776677677777777776776....
                ..8866666677767777777777766666778...
                .86666666777667767777766666776668...
                ..88677666666777677677666667776668..
                ..86776677666666666666667776666668..
                886666677766667666666776677766668...
                6668666676667766767767766677666668..
                88866666666777677677667666666776668.
                .86668866666766776776666667766666668
                .86688666666666776666667667776666688
                .668866666666666666666677666666688..
                ..8866686666666666677667776666668...
                ...866886666666666677667776666668...
                ...86886668666666667666666666888....
                ....88866886686666666666666668......
                ......86886668666866668666868.......
                ......88866688668866688866888.......
                ........8888888688888ce868..........
                ..............e88e88.ec.8...........
                ...............eeee..e..............
                ...............ceef.ce..............
                ...............ceefcec..............
                ...............feefce...............
                ...............fceeec...............
                ...............ffceec...............
                `, SpriteKind.Tree)
            tiles.placeOnTile(mySprite2, value)
            mySprite2.y += -20
            tiles.setTileAt(value, sprites.castle.tileDarkGrass1)
            tiles.setWallAt(mySprite2.tilemapLocation(), true)
        }
    }
    if (mySprite.y < 16) {
        sprites.destroyAllSpritesOfKind(SpriteKind.Tree)
        rngnumy += -1
        rng = Random.createRNG(rngnumx * rngnumy)
        mySprite.y = 240
        tiles.setCurrentTilemap(tilemap`level1`)
        for (let x = 0; x <= 15; x++) {
            for (let y = 0; y <= 15; y++) {
                tiles.setTileAt(tiles.getTileLocation(x, y), rng.randomElement([
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.builtin.forestTiles0,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1,
                sprites.castle.tileDarkGrass3,
                sprites.castle.tileDarkGrass1
                ]))
            }
        }
        for (let value of tiles.getTilesByType(sprites.builtin.forestTiles0)) {
            mySprite2 = sprites.create(img`
                ................86..................
                ...........6688867886...............
                ...........8666877688868............
                ............868777767768............
                .........688667777776688............
                ........67767777777778666...........
                .........6776667767666868...........
                ..........866667667677688...........
                .........8666666666667778...........
                ........667766666666666676..........
                .......67766667666776667776.........
                ......886667776676777666688.........
                .....67766777667767777666768........
                ....6776666666777667776666776.......
                .....8667776667766676677776776......
                ......8777666666667776777776688.....
                ....6887766776677677777777776776....
                ..8866666677767777777777766666778...
                .86666666777667767777766666776668...
                ..88677666666777677677666667776668..
                ..86776677666666666666667776666668..
                886666677766667666666776677766668...
                6668666676667766767767766677666668..
                88866666666777677677667666666776668.
                .86668866666766776776666667766666668
                .86688666666666776666667667776666688
                .668866666666666666666677666666688..
                ..8866686666666666677667776666668...
                ...866886666666666677667776666668...
                ...86886668666666667666666666888....
                ....88866886686666666666666668......
                ......86886668666866668666868.......
                ......88866688668866688866888.......
                ........8888888688888ce868..........
                ..............e88e88.ec.8...........
                ...............eeee..e..............
                ...............ceef.ce..............
                ...............ceefcec..............
                ...............feefce...............
                ...............fceeec...............
                ...............ffceec...............
                `, SpriteKind.Tree)
            tiles.placeOnTile(mySprite2, value)
            mySprite2.y += -20
            tiles.setTileAt(value, sprites.castle.tileDarkGrass1)
            tiles.setWallAt(mySprite2.tilemapLocation(), true)
        }
    }
})
